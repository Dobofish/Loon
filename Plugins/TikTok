#!name = TikTok 全功能解锁
#!desc = 支持视频、评论、登录，无水印
#!author = 小智
#!icon = https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Social_Media/TikTok.png
#!select = 解鎖地區,日本,美國,英國,韓國,台灣,新加坡,馬來西亞,越南

[Rule]
# ➤ TikTok 相关域名全部走代理
DOMAIN-KEYWORD, tiktok, PROXY
DOMAIN-KEYWORD, muscdn, PROXY
DOMAIN-KEYWORD, musical.ly, PROXY
DOMAIN-KEYWORD, byteoversea, PROXY
DOMAIN-KEYWORD, tiktokapi, PROXY
DOMAIN-KEYWORD, tik-tokapi, PROXY
DOMAIN-KEYWORD, tik-tokcdn, PROXY

DOMAIN-SUFFIX, capcut.com, PROXY
DOMAIN-SUFFIX, pstatp.com, PROXY
DOMAIN-SUFFIX, bytecdn.net, PROXY
DOMAIN-SUFFIX, snssdk.com, PROXY
DOMAIN-SUFFIX, bytedapm.com, PROXY

[Rewrite]
# 移除 TikTok 广告
^https:\/\/api(-\w+)?\.tiktokv\.com\/api\/ad\/ reject
# 移除 TikTok 域名探测（防止自动锁区）
^https:\/\/tnc\d+-platform-\w+\.tiktokv\.com\/get_domains\/ reject

[Script]
http-request ^https?:\/\/.+\.(tiktokv|tiktokcdn)\.com\/.+(region\d?=CN|&mcc_mnc=\d+) script-path = https://raw.githubusercontent.com/Semporia/TikTok-Unlock/refs/heads/master/Loon/TikTok.js, tag = TikTok 解锁

[MITM]
hostname = *.tiktokv.com, *.tiktokcdn.com, *.byteoversea.com, *.tik-tokapi.com, *.tiktokapi.com
