#!name = TikTok 解鎖
#!desc = 移除 TikTok 視頻水印並自定義區域解鎖，需要設定此插件對應區域的節點。
#!openUrl = https://github.com/Semporia/TikTok-Unlock
#!author = Semporia
#!system = 
#!system_version = 
#!homepage = https://github.com/Semporia/TikTok-Unlock
#!icon = https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Social_Media/TikTok.png
#!select = 解鎖地區,台灣,日本,韓國,泰國,越南,英國,法國,德國,美國,巴西,俄羅斯,墨西哥,土耳其,西班牙,阿根廷,新加坡,菲律賓,馬來西亞

[Rule]
AND, ((GEOIP, CN), (DOMAIN, pitaya.bytedance.com)), DIRECT // 此為抖音和TikTok的*.bytedance.com共有域名，僅國外解析指定代理
DOMAIN, api.snapkit.com, Proxy
DOMAIN, cocacola.co.jp, Proxy
DOMAIN, courses.snapsolve.com, Proxy
DOMAIN, engagements.appsflyer.com, Proxy
DOMAIN, lf16-campaign.ttlstatic.com, Proxy
DOMAIN, lf16-csp.oecstatic.com, Proxy
DOMAIN, lf16-pkgcdn.pitaya-clientai.com, Proxy
DOMAIN, lf16-scmcdn.oecstatic.com, Proxy
DOMAIN, lf19-csp.oecstatic.com, Proxy
DOMAIN, lf19-pkgcdn.pitaya-clientai.com, Proxy
DOMAIN, lf19-scmcdn.oecstatic.com, Proxy
DOMAIN, musically-alternate.app.link, Proxy
DOMAIN, musically.app.link, Proxy
DOMAIN, p1-tt-ipv6.byteimg.com, Proxy
DOMAIN, p1-tt.byteimg.com, Proxy
DOMAIN, p26-tt.byteimg.com, Proxy
DOMAIN, p3-tt-ipv6.byteimg.com, Proxy
DOMAIN, p9-tt.byteimg.com, Proxy
DOMAIN, pull-f3-hs.pstatp.com, Proxy
DOMAIN, pull-f5-hs.flive.pstatp.com, Proxy
DOMAIN, pull-f5-hs.pstatp.com, Proxy
DOMAIN, pull-f5-mus.pstatp.com, Proxy
DOMAIN, pull-flv-f1-hs.pstatp.com, Proxy
DOMAIN, pull-flv-f6-hs.pstatp.com, Proxy
DOMAIN, pull-flv-l1-hs.pstatp.com, Proxy
DOMAIN, pull-flv-l1-mus.pstatp.com, Proxy
DOMAIN, pull-flv-l6-hs.pstatp.com, Proxy
DOMAIN, pull-hls-l1-mus.pstatp.com, Proxy
DOMAIN, pull-l3-hs.pstatp.com, Proxy
DOMAIN, pull-rtmp-f1-hs.pstatp.com, Proxy
DOMAIN, pull-rtmp-f6-hs.pstatp.com, Proxy
DOMAIN, pull-rtmp-l1-hs.pstatp.com, Proxy
DOMAIN, pull-rtmp-l1-mus.pstatp.com, Proxy
DOMAIN, pull-rtmp-l6-hs.pstatp.com, Proxy
DOMAIN, roovza-launches.appsflyersdk.com, Proxy
DOMAIN-SUFFIX, bytedance.com, Proxy
DOMAIN-SUFFIX, bytedance.net, Proxy
DOMAIN-SUFFIX, bytedapm.com, Proxy
DOMAIN-SUFFIX, bytefcdn-oversea.com, Proxy
DOMAIN-SUFFIX, bytefcdn-ttpeu.com, Proxy
DOMAIN-SUFFIX, bytegecko-i18n.com, Proxy
DOMAIN-SUFFIX, byteglb.com, Proxy
DOMAIN-SUFFIX, byteicdn.com, Proxy
DOMAIN-SUFFIX, byteigtm.com, Proxy
DOMAIN-SUFFIX, byteintl.com, Proxy
DOMAIN-SUFFIX, byteintl.net, Proxy
DOMAIN-SUFFIX, byteoversea.com, Proxy
DOMAIN-SUFFIX, byteoversea.net, Proxy
DOMAIN-SUFFIX, bytetcdn.com, Proxy
DOMAIN-SUFFIX, capcut.com, Proxy
DOMAIN-SUFFIX, ibytedtos.com, Proxy
DOMAIN-SUFFIX, ibyteimg.com, Proxy
DOMAIN-SUFFIX, ipstatp.com, Proxy
DOMAIN-SUFFIX, isnssdk.com, Proxy
DOMAIN-SUFFIX, muscdn.com, Proxy
DOMAIN-SUFFIX, musemuse.cn, Proxy
DOMAIN-SUFFIX, musical.ly, Proxy
DOMAIN-SUFFIX, sgpstatp.com, Proxy
DOMAIN-SUFFIX, sgsnssdk.com, Proxy
DOMAIN-SUFFIX, tik-tokapi.com, Proxy
DOMAIN-SUFFIX, tiktok-usts.net, Proxy
DOMAIN-SUFFIX, tiktok.com, Proxy
DOMAIN-SUFFIX, tiktok.in, Proxy
DOMAIN-SUFFIX, tiktokcdn-eu.com, Proxy
DOMAIN-SUFFIX, tiktokcdn-eu.net, Proxy
DOMAIN-SUFFIX, tiktokcdn-in.com, Proxy
DOMAIN-SUFFIX, tiktokcdn-us.com, Proxy
DOMAIN-SUFFIX, tiktokcdn.com, Proxy
DOMAIN-SUFFIX, tiktokd.net, Proxy
DOMAIN-SUFFIX, tiktokd.org, Proxy
DOMAIN-SUFFIX, tiktokglobalshop.com, Proxy
DOMAIN-SUFFIX, tiktokglobalshopv.com, Proxy
DOMAIN-SUFFIX, tiktokmusic.app, Proxy
DOMAIN-SUFFIX, tiktokshop.com, Proxy
DOMAIN-SUFFIX, tiktokstaticb.com, Proxy
DOMAIN-SUFFIX, tiktokv.com, Proxy
DOMAIN-SUFFIX, tiktokv.eu, Proxy
DOMAIN-SUFFIX, tiktokv.us, Proxy
DOMAIN-SUFFIX, tiktokw.us, Proxy
DOMAIN-SUFFIX, tlivecdn.com, Proxy
DOMAIN-SUFFIX, tlivepush.com, Proxy
DOMAIN-SUFFIX, ttadsmanager.com, Proxy
DOMAIN-SUFFIX, ttapis.com, Proxy
DOMAIN-SUFFIX, ttdns2.com, Proxy
DOMAIN-SUFFIX, ttlivecdn.com, Proxy
DOMAIN-SUFFIX, ttoversea.net, Proxy
DOMAIN-SUFFIX, ttoverseaus.net, Proxy
DOMAIN-SUFFIX, ttwstatic.com, Proxy
DOMAIN-SUFFIX, tzvbfs.com, Proxy
DOMAIN-KEYWORD, bytedance.map., Proxy
DOMAIN-KEYWORD, musical.ly., Proxy
DOMAIN-KEYWORD, tiktokcdn-, Proxy
DOMAIN-KEYWORD, tiktokcdn.com., Proxy
DOMAIN-KEYWORD, tiktokv.com., Proxy
DOMAIN-KEYWORD, ttcdn-tos., Proxy
DOMAIN-KEYWORD, ttlivecdn.com., Proxy

[Rewrite]
# 移除廣告
^https:\/\/api-va\.tiktokv\.com\/api\/ad\/ reject
# 解析域名
^https:\/\/tnc\d+-platform-\w+\.tiktokv\.com\/get_domains\/ reject

[Script]
http-request https?:\/\/.+.(tiktokv|tiktokcdn).com\/.+(region\d?=CN|&mcc_mnc=\d+) script-path = https://raw.githubusercontent.com/Semporia/TikTok-Unlock/refs/heads/master/Loon/TikTok.js, tag = TikTok 解鎖

[MITM]
hostname = *.byteoversea.com, *.tik-tokapi.com, *.tiktokv.com
